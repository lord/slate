<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Documentation</title>

    <link href="../stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="../stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="../javascripts/all_nosearch.js" type="text/javascript"></script>

  </head>

  <body class="includes includes_charge_accounts">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="../images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="../images/logo.png" />
      <div id="toc">
      </div>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="conta-cobrança">Conta Cobrança</h1>
<pre class="highlight plaintext"><code>Conta de Cobrança

EXEMPLO

  {
    "id": 1,
    "bank_account_id": 1,
    "portfolio_code": "17",
    "agreement_code": "12345678",
    "agreement_code_digit": "1",
    "name": "Conta Cobrança",
    "initial_number": 1,
    "current_number": 1,
    "end_number": 1000,
    "status": "pending",
    "_links":
      [
        {"rel":"self","method":"GET","href":"https://app.cobrato.com/api/v1/charge_accounts/1"},
        {"rel":"update","method":"PUT","href":"https://app.cobrato.com/api/v1/charge_accounts/1"},
        {"rel":"destroy","method":"DELETE","href":"https://app.cobrato.com/api/v1/charge_accounts/1"},
        {"rel":"bank_account","method":"GET","href":"https://app.cobrato.com/api/v1/bank_accounts/1"}
      ]
  }

</code></pre>

<p>As Contas de Cobranças, pertencem as suas contas bancárias, sendo assim é necessário que sempre haja ao menos uma conta bancária para criação de conta de cobrança. As validações nas contas de cobranças são de acordo com o banco, de sua conta bancária.</p>

<p>Parâmetros</p>

<p>id: integer
bank_account_id:  integer
identificador da conta bancária desta conta de cobrança no Cobrato
portfolio_code: string
código de portfólio
agreement_code: string
código de convênio ou do cedente, de acordo com o banco. No caso do Itaú deve ser igual ao campo &lsquo;account&rsquo; da conta bancária
agreement_code_digit: string
verificador do código de convênio, de acordo com o banco, no caso do Itaú deve ser igual ao campo &#39;account_digit&rsquo; da conta bancária e no HSBC deve permanecer em branco
name: string
initial_number: integer
número inicial do nosso número, sendo atribuído automaticamente e sequencialmente as cobranças
current_number: integer
nosso número atribuído a última cobrança criada a partir desta conta de cobrança
end_number: integer
número final do nosso número, sendo o último número a ser atribuído, após isso a sequência é reiniciada
status: string
caso for &#39;pending&rsquo; a conta ainda não está homologada
caso for &#39;ok&rsquo; a conta já consta como homologada
_links: array of object
links da conta de cobrança e de sua conta bancária</p>

<h2 id="lista-de-todos-as-contas-de-cobrança">Lista de Todos as Contas de Cobrança</h2>
<pre class="highlight plaintext"><code>Listar Conta de Cobrança

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charge_accounts

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X GET https://app.cobrato.com/api/v1/charge_accounts

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  {
    "charge_accounts":
      [
        {
          //informações conta de cobrança 1
        },
        {
          //informações conta de cobrança 2
        },
        ...
      ]
  }

</code></pre>

<p>Retorna uma lista em JSON contendo todos as contas de cobranças que pertencem a sua Conta de Serviço.</p>

<h3 id="informações-da-conta-de-cobrança">Informações da Conta de Cobrança</h3>
<pre class="highlight plaintext"><code>Mostra Conta de Cobrança

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X GET https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  {
    "id": 1,
    "bank_account_id": 1,
    "portfolio_code": "17",
    "agreement_code": "12345678",
    "agreement_code_digit": "1",
    "name": "Conta Cobrança",
    "initial_number": 1,
    "current_number": 1,
    "end_number": 1000,
    "status": "pending",
    "_links":
      [
        {"rel":"self","method":"GET","href":"https://app.cobrato.com/api/v1/charge_accounts/1"},
        {"rel":"update","method":"PUT","href":"https://app.cobrato.com/api/v1/charge_accounts/1"},
        {"rel":"destroy","method":"DELETE","href":"https://app.cobrato.com/api/v1/charge_accounts/1"},
        {"rel":"bank_account","method":"GET","href":"https://app.cobrato.com/api/v1/bank_accounts/1"}
      ]
  }

</code></pre>

<p>Retorna as informações detalhadas da conta de cobrança informada em JSON e também a referência a sua conta bancária.</p>

<h2 id="informações-da-conta-de-cobrança">Informações da Conta de Cobrança</h2>
<pre class="highlight plaintext"><code>Mostra Conta de Cobrança

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X GET https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  {
    "id": 1,
    "bank_account_id": 1,
    "portfolio_code": "17",
    "agreement_code": "12345678",
    "agreement_code_digit": "1",
    "name": "Conta Cobrança",
    "initial_number": 1,
    "current_number": 1,
    "end_number": 1000,
    "status": "pending",
    "_links":
      [
        {"rel":"self","method":"GET","href":"https://app.cobrato.com/api/v1/charge_accounts/1"},
        {"rel":"update","method":"PUT","href":"https://app.cobrato.com/api/v1/charge_accounts/1"},
        {"rel":"destroy","method":"DELETE","href":"https://app.cobrato.com/api/v1/charge_accounts/1"},
        {"rel":"bank_account","method":"GET","href":"https://app.cobrato.com/api/v1/bank_accounts/1"}
      ]
  }

</code></pre>

<h2 id="retorna-as-informações-detalhadas-da-conta-de-cobrança-informada-em-json-e-também-a-referência-a-sua-conta-bancária">Retorna as informações detalhadas da conta de cobrança informada em JSON e também a referência a sua conta bancária.</h2>
<pre class="highlight plaintext"><code>Criar Conta de Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charge_accounts

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X POST https://app.cobrato.com/api/v1/charge_accounts
    -D '{
          "bank_account_id": "1",
          "portfolio_code": "17",
          "agreement_code": "12345678",
          "agreement_code_digit": "1",
          "name": "Conta Cobrança",
          "initial_number": "1",
          "end_number": "1000"
        }'

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  {
    "errors":
      {
        "name":["não pode ficar em branco"],
        "portfolio_code":["não pode ficar em branco"],
        "agreement_code":["não pode ficar em branco"],
        "agreement_code_digit":["não pode ficar em branco"]
      }
  }

</code></pre>

<p>Criação de Conta de Cobrança</p>
<pre class="highlight plaintext"><code>Criar Conta de Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charge_accounts

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X POST https://app.cobrato.com/api/v1/charge_accounts
    -D '{
          "bank_account_id": "1",
          "portfolio_code": "17",
          "agreement_code": "12345678",
          "agreement_code_digit": "1",
          "name": "Conta Cobrança",
          "initial_number": "1",
          "end_number": "1000"
        }'

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  {
    "errors":
      {
        "name":["não pode ficar em branco"],
        "portfolio_code":["não pode ficar em branco"],
        "agreement_code":["não pode ficar em branco"],
        "agreement_code_digit":["não pode ficar em branco"]
      }
  }

</code></pre>

<p>Cria um nova conta de cobrança, retornando as informações da mesma caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta.</p>
<pre class="highlight plaintext"><code>Criar Conta de Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charge_accounts

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X POST https://app.cobrato.com/api/v1/charge_accounts
    -D '{
          "bank_account_id": "1",
          "portfolio_code": "17",
          "agreement_code": "12345678",
          "agreement_code_digit": "1",
          "name": "Conta Cobrança",
          "initial_number": "1",
          "end_number": "1000"
        }'

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  {
    "errors":
      {
        "name":["não pode ficar em branco"],
        "portfolio_code":["não pode ficar em branco"],
        "agreement_code":["não pode ficar em branco"],
        "agreement_code_digit":["não pode ficar em branco"]
      }
  }

</code></pre>

<p>Parâmetros</p>

<p>bank_account_id:  integer requirido
código de identificação da conta bancária em que a conta de cobrança irá pertencer
portfolio_code: string requirido
código de portfólio, validação conforme o banco determinado através
agreement_code: string
requirido, com exceção do Itaú onde é preenchido automaticamente
agreement_code_digit: string
requirido, com exceção do HSBC e Itaú, sendo preenchido automaticamente para o último
name: string requirido
initial_number: integer requirido
número inicial do nosso número, sendo atribuído automaticamente e sequencialmente às cobranças
end_number: integer
número final do nosso número, sendo o último número a ser atribuído, após isso a sequência é reiniciada</p>

<h2 id="atualização-de-conta-de-cobrança">Atualização de Conta de Cobrança</h2>
<pre class="highlight plaintext"><code>Atualizar Conta de Cobrança

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id
  PATCH https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X PATCH https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id
    -D '{
          "portfolio_code": "17",
          "agreement_code": "12345678",
          "agreement_code_digit": "1",
          "name": "Novo Nome"
        }'

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA DE COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  {
    "errors":
      {
        "bank_code": ["não possui o tamanho esperado (3 caracteres)"],
        "agency": ["não é um número"],
        "account": ["não é um número"],
      }
  }

</code></pre>

<p>Atualiza a conta de cobrança determinada, retornando as informações da mesma caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>
<pre class="highlight plaintext"><code>Atualizar Conta de Cobrança

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id
  PATCH https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X PATCH https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id
    -D '{
          "portfolio_code": "17",
          "agreement_code": "12345678",
          "agreement_code_digit": "1",
          "name": "Novo Nome"
        }'

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA DE COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  {
    "errors":
      {
        "bank_code": ["não possui o tamanho esperado (3 caracteres)"],
        "agency": ["não é um número"],
        "account": ["não é um número"],
      }
  }

</code></pre>

<p>Parâmetros</p>

<p>portfolio_code: string
código de portfólio, validação conforme o banco determinado através
agreement_code: string
agreement_code_digit: string
name: string
initial_number: integer requirido
número inicial do nosso número, sendo atribuído automaticamente e sequencialmente as cobranças
end_number: integer
número final do nosso número, sendo o último número a ser atribuído, após isso a sequência é reiniciada</p>

<h2 id="exclusão-de-conta-de-cobrança">Exclusão de Conta de Cobrança</h2>
<pre class="highlight plaintext"><code>Excluir Conta de Cobrança

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X DELETE https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA DE COBRANÇA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinada conta de cobrança e junto a ela todas suas cobranças. As mudanças são irreversíveis.</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
