<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Cobrato</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li>Este projeto é mantido por</li>
            <li><a href='#'>Myfreecomm</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="autenticação">Autenticação</h1>

<p>Autenticação</p>

<p>Antes de acessar o Cobrato, você deve criar uma conta em: Cobrato. Se você já tiver uma, você precisa ter o seu API token, você pode conseguí-lo nas configurações de sua conta, o token é requerido em todas as requisições via API, o token é usado para identificá-lo.</p>

<p>Autenticação na API do Cobrato é realizada utilizando HTTP Basic, Porem você não vai usar sua senha e login como de costume, você terá que usar o token da API como sendo seu login e a senha em branco, (se o seu cliente HTTP requer uma senha, você pode digitar X).</p>
<pre class="highlight plaintext"><code>Formato JSON

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $YOUR_API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X GET https://app.cobrato.com/api/v1

EXEMPLO DE RESPOSTA

{
  "chave": "valor"
}

</code></pre>

<h2 id="formatos-de-requisição-e-resposta">Formatos de requisição e resposta</h2>

<p>O único formato disponível para requisições e respostas é JSON.</p>

<h2 id="fuso-horário">Fuso horário</h2>

<p>Todos os dados recebidos e enviados através da API do Cobrato é baseado no fuso horário UTC. No entanto um usuário pode ter uma preferência por outro. Este fuso horário vai ser utilizado para apresentar a resposta, isso não afeta o resultado da resposta da API</p>

<p>Formatos de data e hora</p>

<p>Todas as datas e horas são formatadas de acordo com ISO 8601 padrão, e sempre vai ser dada no fuso horário.</p>

<p>Você deve sempre fornecer os seus valores de data e hora no mesmo formato ISO 8601 e no fuso horário UTC.</p>

<table><thead>
<tr>
<th>Tipo</th>
<th>Formato</th>
<th>Exemplo</th>
</tr>
</thead><tbody>
<tr>
<td>Data</td>
<td>YYYY-mm-dd</td>
<td>2014-11-05</td>
</tr>
<tr>
<td>Data hora</td>
<td>YYYY-mm-ddTHH:MM:SSZ</td>
<td>2014-11-05T17:28:03Z</td>
</tr>
</tbody></table>

<h2 id="formato-numérico">Formato numérico</h2>

<p>Todos os números são fornecidos tanto com números inteiros, ponto flutuante nativos para JSON.</p>

          <h1 id="cedente">Cedente</h1>
<pre class="highlight plaintext"><code>Cedente

EXEMPLO

  {
    "id":1,
    "national_identifier_type":"cpf",
    "national_identifier":"38031171513",
    "name":"João Silveira",
    "zipcode":"99000-750",
    "city":"Carapebus",
    "state":"RJ",
    "neighbourhood":"Centro",
    "street":"Rua Julio de Castilhos",
    "number":"100",
    "complement": "Ao lado da lotérica.",
    "_links":
      [
        {"rel":"self","method":"GET","href":"https://app.cobrato.com/api/v1/payees/1"},
        {"rel":"update","method":"PUT","href":"https://app.cobrato.com/api/v1/payees/1"},
        {"rel":"destroy","method":"DELETE","href":"https://app.cobrato.com/api/v1/payees/1"}
      ]
  }
</code></pre>

<p>É possível ter indeterminados cedentes, e a eles que pertencem as contas bancárias, contas de cobrança, e as próprias cobranças do sistema. Podem ser tanto pessoas físicas como pessoas jurídicas.</p>

<p>Parâmetros</p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td>tipo de identificação nacional, cpf ou cnpj</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td>código do cnpj ou cpf, de acordo com o campo anterior</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>nome da cidade na qual o cedente reside</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>uf do estado aonde o cedente reside</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links do cedente</td>
</tr>
</tbody></table>

<h2 id="lista-de-todos-os-cedentes">Lista de Todos os Cedentes</h2>

<p>Retorna uma lista em JSON contendo todos os cedentes pertencentes a sua Conta de Serviço.</p>
<pre class="highlight plaintext"><code>Listar Cedentes

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/payees

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X GET https://app.cobrato.com/api/v1/payees

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  {
    "payees":
      [
        {
          //informações cedente 1
        },
        {
          //informações cedente 2
        },
        ...
      ]
  }
</code></pre>

<h2 id="informações-do-cedente">Informações do Cedente</h2>
<pre class="highlight plaintext"><code>Mostra Cedente

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X GET https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  {
    "id":1,
    "national_identifier_type":"cpf",
    "national_identifier":"38031171513",
    "name":"João Silveira",
    "zipcode":"99000-750",
    "city":"Carapebus",
    "state":"RJ",
    "neighbourhood":"Centro",
    "street":"Rua Julio de Castilhos",
    "number":"100",
    "complement": "Ao lado da lotérica.",
    "_links":
      [
        {"rel":"self","method":"GET","href":"https://app.cobrato.com/api/v1/payees/1"},
        {"rel":"update","method":"PUT","href":"https://app.cobrato.com/api/v1/payees/1"},
        {"rel":"destroy","method":"DELETE","href":"https://app.cobrato.com/api/v1/payees/1"}
      ]
  }
</code></pre>

<p>Retorna as informações detalhadas do cedente informado em JSON.</p>

<h2 id="criação-de-cedente">Criação de Cedente</h2>
<pre class="highlight plaintext"><code>Criar Cedente

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/payees

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X POST https://app.cobrato.com/api/v1/payees
    -D '{
        "name": "João Silva",
        "city": "Caxias do Sul",
        "national_identifier_type": "cpf",
        "national_identifier": "38031171513",
        "state": "RS",
        "street": "Rua Principal",
        "neighbourhood": "Centro",
        "number": "174",
        "zipcode": "95055-777"
      }'

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  {
    "errors":{
      "name": ["não pode ficar em branco"],
      "city": ["não pode ficar em branco"],
      "national_identifier_type": ["não pode ficar em branco","não está incluído na lista"],
      "state":["não pode ficar em branco","não possui o tamanho esperado (2 caracteres)"],
      "neighbourhood": ["não pode ficar em branco"],
      "street": ["não pode ficar em branco"],
      "number": ["não pode ficar em branco"],
      "zipcode": ["não pode ficar em branco"]
    }
  }

</code></pre>

<p>Cria um novo cedente, retornando as informações do mesmo caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta.</p>

<p>Parâmetros</p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td>requirido tipo de identificação nacional, deve ser cpf ou cnpj</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td>requirido  código válido de cnpj ou cpf, de acordo com o campo anterior</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>requirido  nome completo do cedente</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>requirido  nome da cidade na qual o cedente reside</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>requirido uf do estado aonde o cedente reside</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td>requirido</td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td>requirido</td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td>requirido</td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td>requirido</td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="atualização-de-cedente">Atualização de Cedente</h2>
<pre class="highlight plaintext"><code>Atualizar Cedente

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/payees/:payee_id
  PATCH https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X PATCH https://app.cobrato.com/api/v1/payees/:payee_id
    -D '{
        "city": "Farroupilha",
        "state": "RS"
      }'

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CEDENTE INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

    {
      "errors":{
        "national_identifier_type":["não está incluído na lista"]
      }
    }

</code></pre>

<p>Atualiza o cedente determinado, retornando as informações do mesmo caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<p>Parâmetros</p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>national_identifier_type</td>
<td>string</td>
<td>tipo de identificação nacional, deve ser cpf ou cnpj</td>
</tr>
<tr>
<td>national_identifier</td>
<td>string</td>
<td>código válido de cnpj ou cpf, de acordo com o campo anterior</td>
</tr>
<tr>
<td>name</td>
<td>string</td>
<td>nome completo do cedente</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>nome da cidade na qual o cedente reside</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>uf do estado aonde o cedente reside</td>
</tr>
<tr>
<td>neighbourhood</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>street</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>number</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>zipcode</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>complement</td>
<td>string</td>
<td></td>
</tr>
</tbody></table>

<h2 id="exclusão-de-cedente">Exclusão de Cedente</h2>
<pre class="highlight plaintext"><code>Excluir Cedente

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X DELETE https://app.cobrato.com/api/v1/payees/:payee_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM CEDENTE INEXISTENTE

    404 Not Found
</code></pre>

<p>Exclui determinado cedente e junto a ele todas suas contas de cobrança, contas bancárias e as cobranças. As mudanças são irreversíveis.</p>

          <h1 id="contas-bancárias">Contas Bancárias</h1>
<pre class="highlight plaintext"><code>Conta Bancária

EXEMPLO

  {
    "id":1,
    "payee_id":"1",
    "bank_code":"001",
    "agency":"1606",
    "agency_digit":"3",
    "account":"91000",
    "account_digit":"7",
    "_links":
      [
        {"rel":"self","method":"GET","href":"https://app.cobrato.com/api/v1/bank_accounts/1"},
        {"rel":"update","method":"PUT","href":"https://app.cobrato.com/api/v1/bank_accounts/1"},
        {"rel":"destroy","method":"DELETE","href":"https://app.cobrato.com/api/v1/bank_accounts/1"},
        {"rel":"payee","method":"GET","href":"https://app.cobrato.com/api/v1/payees/1"}
      ]
  }
</code></pre>

<p>As Contas Bancárias, pertencem aos seus cedentes, sendo assim é necessário que sempre haja ao menos um cedente para criação de conta bancária.</p>

<p>Parâmetros</p>

<p>id: integer
payee_id: integer
identificador do cedento no Cobrato
bank_code:  string
código do banco no Febraban
agency: string
agency_digit: string
Apenas utilizado pelo Banco do Brasil(001)
account:  string
account_digit:  string
Apenas não utilizado pelo HSBC(399)
_links: array of object
links da conta bancária e de seu cedente</p>

<h2 id="lista-de-todos-as-contas-bancárias">Lista de Todos as Contas Bancárias</h2>
<pre class="highlight plaintext"><code>Listar Conta Bancária

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/bank_accounts

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X GET https://app.cobrato.com/api/v1/bank_accounts

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  {
    "bank_accounts":
      [
        {
          //informações conta bancária 1
        },
        {
          //informações conta bancária 2
        },
        ...
      ]
  }

</code></pre>

<p>Retorna uma lista em JSON contendo todos as contas bancárias em que seus cedentes pertencentes a sua Conta de Serviço.</p>

<h2 id="informações-da-conta-bancária">Informações da Conta Bancária</h2>
<pre class="highlight plaintext"><code>Mostra Conta Bancária

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X GET https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  {
    "id":1,
    "payee_id":"1",
    "bank_code":"001",
    "agency":"1606",
    "agency_digit":"3",
    "account":"91000",
    "account_digit":"7",
    "_links":
      [
        {"rel":"self","method":"GET","href":"https://app.cobrato.com/api/v1/bank_accounts/1"},
        {"rel":"update","method":"PUT","href":"https://app.cobrato.com/api/v1/bank_accounts/1"},
        {"rel":"destroy","method":"DELETE","href":"https://app.cobrato.com/api/v1/bank_accounts/1"},
        {"rel":"payee","method":"GET","href":"https://app.cobrato.com/api/v1/payees/1"}
      ]
  }

</code></pre>

<h2 id="retorna-as-informações-detalhadas-da-conta-bancária-informada-em-json-e-também-a-referência-ao-seu-cedente">Retorna as informações detalhadas da conta bancária informada em JSON e também a referência ao seu cedente.</h2>
<pre class="highlight plaintext"><code>Criar Conta Bancária

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/bank_accounts

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X POST https://app.cobrato.com/api/v1/bank_accounts
    -D '{
          "payee_id": "1",
          "bank_code": "001",
          "agency":"1606",
          "agency_digit":"3",
          "account":"91000",
          "account_digit":"7"
        }'

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  {
    "errors":
      {
        "bank_code": ["não pode ficar em branco","não possui o tamanho esperado (3 caracteres)"],
        "agency": ["não pode ficar em branco","não é um número"],
        "account": ["não pode ficar em branco","não é um número"],
        "payee_id":["não pode ficar em branco"]
      }
  }


</code></pre>

<p>Criação de Conta Bancária</p>

<p>Cria um nova conta bancária, retornando as informações da mesma caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta.</p>

<p>Parâmetros</p>

<p>payee_id: integer requirido
identificação do cedente em que a conta bancária irá pertencer
bank_code:  string requirido
código do banco no Febraban
agency: string requirido
agency_digit: string requirido apenas para o Banco do Brasil(001)
account:  string requirido
account_digit:  string requirido com exceção do HSBC(399)</p>

<h2 id="atualização-de-conta-bancária">Atualização de Conta Bancária</h2>
<pre class="highlight plaintext"><code>Atualizar Conta Bancária

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id
  PATCH https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X PATCH https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id
    -D '{
          "agency":"1606",
          "agency_digit":"3"
        }'

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA BANCÁRIA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  {
    "errors":
      {
        "bank_code": ["não possui o tamanho esperado (3 caracteres)"],
        "agency": ["não é um número"],
        "account": ["não é um número"],
      }
  }

</code></pre>

<p>Atualiza a conta bancária determinada, retornando as informações da mesma caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<p>Ao alterar campo &lsquo;bank_code&rsquo;, caso houvesse algum campo preenchido que de acordo com o novo banco deverá ficar em branco, o Cobrato fará automaticamente. Exemplo ao alterar uma conta bancária do Banco do Brasil para o Bradesco, o campo &#39;agency_digit&rsquo; receberá &#39;null&rsquo; como novo valor.</p>

<p>Parâmetros</p>

<p>agency: string
agency_digit: string
account:  string
account_digit:  string</p>

<h2 id="exclusão-de-conta-bancária">Exclusão de Conta Bancária</h2>
<pre class="highlight plaintext"><code>Excluir Conta Bancária

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X DELETE https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA BANCÁRIA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinada conta bancária e junto a ela todas suas contas de cobrança, e cobranças. As mudanças são irreversíveis.</p>

<p>Carteiras disponíveis</p>
<pre class="highlight plaintext"><code>Carteiras disponíveis

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id/portfolio_codes

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X GET https://app.cobrato.com/api/v1/bank_accounts/:bank_account_id/portfolio_codes

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  {
    "portfolio_codes": [
      "11",
      "12",
      "16",
      "17",
      "18",
      "31",
      "51"
    ],
    "_links": {
      "rel": "bank_account",
      "method": "GET",
      "href": "https://sandbox.cobrato.com/api/v1/charges/1"
    }
  }

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA BANCÁRIA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

</code></pre>

<p>Retorna todas as carteiras disponíveis de uma determinada Conta de Cobrança a partir de uma Conta Bancária.</p>

          <h1 id="conta-cobrança">Conta Cobrança</h1>
<pre class="highlight plaintext"><code>Conta de Cobrança

EXEMPLO

  {
    "id": 1,
    "bank_account_id": 1,
    "portfolio_code": "17",
    "agreement_code": "12345678",
    "agreement_code_digit": "1",
    "name": "Conta Cobrança",
    "initial_number": 1,
    "current_number": 1,
    "end_number": 1000,
    "status": "pending",
    "_links":
      [
        {"rel":"self","method":"GET","href":"https://app.cobrato.com/api/v1/charge_accounts/1"},
        {"rel":"update","method":"PUT","href":"https://app.cobrato.com/api/v1/charge_accounts/1"},
        {"rel":"destroy","method":"DELETE","href":"https://app.cobrato.com/api/v1/charge_accounts/1"},
        {"rel":"bank_account","method":"GET","href":"https://app.cobrato.com/api/v1/bank_accounts/1"}
      ]
  }

</code></pre>

<p>As Contas de Cobranças, pertencem as suas contas bancárias, sendo assim é necessário que sempre haja ao menos uma conta bancária para criação de conta de cobrança. As validações nas contas de cobranças são de acordo com o banco, de sua conta bancária.</p>

<p>Parâmetros</p>

<p>id: integer
bank_account_id:  integer
identificador da conta bancária desta conta de cobrança no Cobrato
portfolio_code: string
código de portfólio
agreement_code: string
código de convênio ou do cedente, de acordo com o banco. No caso do Itaú deve ser igual ao campo &lsquo;account&rsquo; da conta bancária
agreement_code_digit: string
verificador do código de convênio, de acordo com o banco, no caso do Itaú deve ser igual ao campo &#39;account_digit&rsquo; da conta bancária e no HSBC deve permanecer em branco
name: string
initial_number: integer
número inicial do nosso número, sendo atribuído automaticamente e sequencialmente as cobranças
current_number: integer
nosso número atribuído a última cobrança criada a partir desta conta de cobrança
end_number: integer
número final do nosso número, sendo o último número a ser atribuído, após isso a sequência é reiniciada
status: string
caso for &#39;pending&rsquo; a conta ainda não está homologada
caso for &#39;ok&rsquo; a conta já consta como homologada
_links: array of object
links da conta de cobrança e de sua conta bancária</p>

<h2 id="lista-de-todos-as-contas-de-cobrança">Lista de Todos as Contas de Cobrança</h2>
<pre class="highlight plaintext"><code>Listar Conta de Cobrança

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charge_accounts

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X GET https://app.cobrato.com/api/v1/charge_accounts

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  {
    "charge_accounts":
      [
        {
          //informações conta de cobrança 1
        },
        {
          //informações conta de cobrança 2
        },
        ...
      ]
  }

</code></pre>

<p>Retorna uma lista em JSON contendo todos as contas de cobranças que pertencem a sua Conta de Serviço.</p>

<h3 id="informações-da-conta-de-cobrança">Informações da Conta de Cobrança</h3>
<pre class="highlight plaintext"><code>Mostra Conta de Cobrança

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X GET https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  {
    "id": 1,
    "bank_account_id": 1,
    "portfolio_code": "17",
    "agreement_code": "12345678",
    "agreement_code_digit": "1",
    "name": "Conta Cobrança",
    "initial_number": 1,
    "current_number": 1,
    "end_number": 1000,
    "status": "pending",
    "_links":
      [
        {"rel":"self","method":"GET","href":"https://app.cobrato.com/api/v1/charge_accounts/1"},
        {"rel":"update","method":"PUT","href":"https://app.cobrato.com/api/v1/charge_accounts/1"},
        {"rel":"destroy","method":"DELETE","href":"https://app.cobrato.com/api/v1/charge_accounts/1"},
        {"rel":"bank_account","method":"GET","href":"https://app.cobrato.com/api/v1/bank_accounts/1"}
      ]
  }

</code></pre>

<p>Retorna as informações detalhadas da conta de cobrança informada em JSON e também a referência a sua conta bancária.</p>

<h2 id="informações-da-conta-de-cobrança">Informações da Conta de Cobrança</h2>
<pre class="highlight plaintext"><code>Mostra Conta de Cobrança

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X GET https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  {
    "id": 1,
    "bank_account_id": 1,
    "portfolio_code": "17",
    "agreement_code": "12345678",
    "agreement_code_digit": "1",
    "name": "Conta Cobrança",
    "initial_number": 1,
    "current_number": 1,
    "end_number": 1000,
    "status": "pending",
    "_links":
      [
        {"rel":"self","method":"GET","href":"https://app.cobrato.com/api/v1/charge_accounts/1"},
        {"rel":"update","method":"PUT","href":"https://app.cobrato.com/api/v1/charge_accounts/1"},
        {"rel":"destroy","method":"DELETE","href":"https://app.cobrato.com/api/v1/charge_accounts/1"},
        {"rel":"bank_account","method":"GET","href":"https://app.cobrato.com/api/v1/bank_accounts/1"}
      ]
  }

</code></pre>

<h2 id="retorna-as-informações-detalhadas-da-conta-de-cobrança-informada-em-json-e-também-a-referência-a-sua-conta-bancária">Retorna as informações detalhadas da conta de cobrança informada em JSON e também a referência a sua conta bancária.</h2>
<pre class="highlight plaintext"><code>Criar Conta de Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charge_accounts

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X POST https://app.cobrato.com/api/v1/charge_accounts
    -D '{
          "bank_account_id": "1",
          "portfolio_code": "17",
          "agreement_code": "12345678",
          "agreement_code_digit": "1",
          "name": "Conta Cobrança",
          "initial_number": "1",
          "end_number": "1000"
        }'

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  {
    "errors":
      {
        "name":["não pode ficar em branco"],
        "portfolio_code":["não pode ficar em branco"],
        "agreement_code":["não pode ficar em branco"],
        "agreement_code_digit":["não pode ficar em branco"]
      }
  }

</code></pre>

<p>Criação de Conta de Cobrança</p>
<pre class="highlight plaintext"><code>Criar Conta de Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charge_accounts

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X POST https://app.cobrato.com/api/v1/charge_accounts
    -D '{
          "bank_account_id": "1",
          "portfolio_code": "17",
          "agreement_code": "12345678",
          "agreement_code_digit": "1",
          "name": "Conta Cobrança",
          "initial_number": "1",
          "end_number": "1000"
        }'

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  {
    "errors":
      {
        "name":["não pode ficar em branco"],
        "portfolio_code":["não pode ficar em branco"],
        "agreement_code":["não pode ficar em branco"],
        "agreement_code_digit":["não pode ficar em branco"]
      }
  }

</code></pre>

<p>Cria um nova conta de cobrança, retornando as informações da mesma caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta.</p>
<pre class="highlight plaintext"><code>Criar Conta de Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charge_accounts

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X POST https://app.cobrato.com/api/v1/charge_accounts
    -D '{
          "bank_account_id": "1",
          "portfolio_code": "17",
          "agreement_code": "12345678",
          "agreement_code_digit": "1",
          "name": "Conta Cobrança",
          "initial_number": "1",
          "end_number": "1000"
        }'

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  {
    "errors":
      {
        "name":["não pode ficar em branco"],
        "portfolio_code":["não pode ficar em branco"],
        "agreement_code":["não pode ficar em branco"],
        "agreement_code_digit":["não pode ficar em branco"]
      }
  }

</code></pre>

<p>Parâmetros</p>

<p>bank_account_id:  integer requirido
código de identificação da conta bancária em que a conta de cobrança irá pertencer
portfolio_code: string requirido
código de portfólio, validação conforme o banco determinado através
agreement_code: string
requirido, com exceção do Itaú onde é preenchido automaticamente
agreement_code_digit: string
requirido, com exceção do HSBC e Itaú, sendo preenchido automaticamente para o último
name: string requirido
initial_number: integer requirido
número inicial do nosso número, sendo atribuído automaticamente e sequencialmente às cobranças
end_number: integer
número final do nosso número, sendo o último número a ser atribuído, após isso a sequência é reiniciada</p>

<h2 id="atualização-de-conta-de-cobrança">Atualização de Conta de Cobrança</h2>
<pre class="highlight plaintext"><code>Atualizar Conta de Cobrança

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id
  PATCH https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X PATCH https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id
    -D '{
          "portfolio_code": "17",
          "agreement_code": "12345678",
          "agreement_code_digit": "1",
          "name": "Novo Nome"
        }'

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA DE COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  {
    "errors":
      {
        "bank_code": ["não possui o tamanho esperado (3 caracteres)"],
        "agency": ["não é um número"],
        "account": ["não é um número"],
      }
  }

</code></pre>

<p>Atualiza a conta de cobrança determinada, retornando as informações da mesma caso haja sucesso. Se houverem erros eles serão informados no corpo da resposta. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>
<pre class="highlight plaintext"><code>Atualizar Conta de Cobrança

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id
  PATCH https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X PATCH https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id
    -D '{
          "portfolio_code": "17",
          "agreement_code": "12345678",
          "agreement_code_digit": "1",
          "name": "Novo Nome"
        }'

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA DE COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  {
    "errors":
      {
        "bank_code": ["não possui o tamanho esperado (3 caracteres)"],
        "agency": ["não é um número"],
        "account": ["não é um número"],
      }
  }

</code></pre>

<p>Parâmetros</p>

<p>portfolio_code: string
código de portfólio, validação conforme o banco determinado através
agreement_code: string
agreement_code_digit: string
name: string
initial_number: integer requirido
número inicial do nosso número, sendo atribuído automaticamente e sequencialmente as cobranças
end_number: integer
número final do nosso número, sendo o último número a ser atribuído, após isso a sequência é reiniciada</p>

<h2 id="exclusão-de-conta-de-cobrança">Exclusão de Conta de Cobrança</h2>
<pre class="highlight plaintext"><code>Excluir Conta de Cobrança

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X DELETE https://app.cobrato.com/api/v1/charge_accounts/:charge_account_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA DE COBRANÇA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinada conta de cobrança e junto a ela todas suas cobranças. As mudanças são irreversíveis.</p>

          <h1 id="cobrança">Cobrança</h1>

<p>As Cobranças, pertencem as suas contas de cobrança, sendo assim é necessário que sempre haja ao menos uma conta de cobrança homologada para a criação de cobranças. Ao criar uma conta de cobrança é automaticamente gerada uma cobrança para homologar a conta.</p>

<p>Parâmetros</p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>integer</td>
<td></td>
</tr>
<tr>
<td>charge_account_id</td>
<td>integer</td>
<td>identificador da conta de cobrança</td>
</tr>
<tr>
<td>due_date</td>
<td>date</td>
<td>data de vencimento da cobranca</td>
</tr>
<tr>
<td>document_kind</td>
<td>string</td>
<td>espécie do documento, podendo ser DM (Duplicata Mercantil), DS (Duplicata de Serviço), NP (Nota Promissória)  ou DV (Diversos)</td>
</tr>
<tr>
<td>document_date</td>
<td>date</td>
<td>data de emissão do documento</td>
</tr>
<tr>
<td>document_number</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>our_number</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>our_number_digit</td>
<td>integer</td>
<td>digito do verificador do nosso número</td>
</tr>
<tr>
<td>custom_our_number</td>
<td>boolean</td>
<td>caso true, o nosso número é atribuído pelo usuário, caso contrário, é atribuído automaticamente pelo Cobrato</td>
</tr>
<tr>
<td>total_amount</td>
<td>decimal</td>
<td>valor total do boleto</td>
</tr>
<tr>
<td>instructions</td>
<td>string</td>
<td>instruções de pagamento do boleto, por padrão &ldquo;Pago em qualquer agência até data do vencimento.&rdquo;</td>
</tr>
<tr>
<td>demonstrative</td>
<td>string</td>
<td>demonstrativo do Boleto, por padrão, contém a taxa bancária</td>
</tr>
<tr>
<td>payer_emails</td>
<td>array of strings</td>
<td>emails de quem irá pagar o boleto</td>
</tr>
<tr>
<td>received</td>
<td>boolean</td>
<td>caso for true, o boleto já foi marcado como recebido</td>
</tr>
<tr>
<td>received_amount</td>
<td>decimal</td>
<td>valor recebido do boleto bancário</td>
</tr>
<tr>
<td>received_at</td>
<td>date</td>
<td>dia do pagamento do boleto</td>
</tr>
<tr>
<td>processing_date</td>
<td>date</td>
<td>data de geração do boleto</td>
</tr>
<tr>
<td>for_homologation</td>
<td>boolean</td>
<td>caso for true, é uma cobrança gerada automaticamente pelo sistema e utilizada para homologação da sua conta de cobrança</td>
</tr>
<tr>
<td>billet</td>
<td>object</td>
<td>link com expiração em uma hora para download do boleto caso já tenha sido gerado</td>
</tr>
<tr>
<td>_links</td>
<td>array of object</td>
<td>links da conta de cobrança e de sua conta bancária</td>
</tr>
</tbody></table>

<h2 id="lista-de-todos-as-cobrança">Lista de Todos as Cobrança</h2>

<p>Retorna uma lista em JSON contendo todos as cobranças que pertencem a sua Conta de Serviço.</p>
<pre class="highlight plaintext"><code>Listar Cobrança

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charges

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X GET https://app.cobrato.com/api/v1/charges

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  {
    "charges":
      [
        {
          //informações cobrança 1
        },
        {
          //informações cobrança 2
        },
        ...
      ]
  }

</code></pre>

<h2 id="informações-da-cobrança">Informações da Cobrança</h2>
<pre class="highlight plaintext"><code>Informar Cobrança

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X GET https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  {
    "id":1,
    "charge_account_id": 1,
    "due_date":"2015-02-14",
    "document_kind":"DV",
    "document_date":null,
    "document_number":null,
    "custom_our_number": "true",
    "our_number":"0",
    "our_number_digit":null,
    "total_amount":"10.07",
    "instructions":"Pagável em qualquer agência até data do vencimento",
    "demonstrative":"Demonstrativo",
    "payer_emails":["myemail@gmail.com"],
    "received":true,
    "received_amount":"10.07",
    "received_at":"2015-01-30",
    "processing_date":"2015-01-30",
    "for_homologation":true,
    "billet":"https://cobrato-billet-storage.s3.amazonaws.com/billets/1/0269_0008961_1422621964.pdf?AWSAccessKeyId=AKIAJZYRPE7LUTTBNALQ\u0026Expires=1422650715\u0026Signature=JXdko57tCsKRWSy473zQXYUxVfg%3D",
    "_links":
      [
        {"rel":"self","method":"GET","href":"https://app.cobrato.com/api/v1/charges/1"},
        {"rel":"update","method":"PUT","href":"https://app.cobrato.com/api/v1/charges/1"},
        {"rel":"destroy","method":"DELETE","href":"https://app.cobrato.com/api/v1/charges/1"},
        {"rel":"receive","method":"POST","href":"https://app.cobrato.com/api/v1/charges/1/receive"},
        {"rel":"deliver","method":"POST","href":"https://app.cobrato.com/api/v1/charges/1/deliver_billet"},
        {"rel":"charge_account","method":"GET","href":"https://app.cobrato.com/api/v1/charge_accounts/1"}
      ]
  }


</code></pre>

<p>Retorna as informações detalhadas da cobrança informada em JSON e também a referência a sua conta de cobrança.</p>
<pre class="highlight plaintext"><code>Criar Cobrança

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/charges

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X POST https://app.cobrato.com/api/v1/charges
    -D '{
          "charge_account_id": 1,
          "due_date":"2015-02-14",
          "document_kind":"DV",
          "our_number":"12345678",
          "total_amount":"10.07",
          "payer_emails":["myemail@gmail.com"]
        }'

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  {
    "errors":
      {
        "charge_account_id":["não pode ficar em branco"],
        "our_number":["não pode ficar em branco"],
        "total_amount":["não pode ficar em branco"],
        "document_kind":["não pode ficar em branco","não está incluído na lista"],
        "due_date":["não pode ficar em branco"]
      }
  }

</code></pre>

<h2 id="criação-de-cobrança">Criação de Cobrança</h2>

<p>Cria um nova cobrança, caso haja sucesso retornará as informações da mesma e será gerado seu boleto. Se houverem erros eles serão informados no corpo da resposta.</p>

<p>Parâmetros</p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>charge_account_id</td>
<td>integer</td>
<td>requirido código de identificação da conta bancária em que a conta de cobrança irá pertencer</td>
</tr>
<tr>
<td>due_date</td>
<td>date</td>
<td>requirido  data de vencimento da cobrança</td>
</tr>
<tr>
<td>document_kind</td>
<td>string</td>
<td>requirido espécie do documento, podendo ser DM (Duplicata Mercantil), DS (Duplicata de Serviço), NP (Nota Promissória) ou DV (Diversos)</td>
</tr>
<tr>
<td>document_date</td>
<td>date</td>
<td>data de emissão do documento</td>
</tr>
<tr>
<td>document_number</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>our_number</td>
<td>string</td>
<td>Caso não informado, é atribuído automaticamente pelo sistema</td>
</tr>
<tr>
<td>our_number_digit</td>
<td>integer</td>
<td>digito do verificador do nosso número</td>
</tr>
<tr>
<td>custom_our_number</td>
<td>boolean</td>
<td>Preenchido automaticamente, mas caso informado true, o campo &lsquo;our_number&rsquo; se torna requirido</td>
</tr>
<tr>
<td>total_amount</td>
<td>decimal</td>
<td>requirido valor total do boleto</td>
</tr>
<tr>
<td>instructions</td>
<td>string</td>
<td>instruções de pagamento do boleto, por padrão &ldquo;Pago em qualquer agência até data do vencimento.&rdquo;</td>
</tr>
<tr>
<td>demonstrative</td>
<td>string</td>
<td>demonstrativo do Boleto, por padrão, contém a taxa bancária</td>
</tr>
<tr>
<td>payer_emails</td>
<td>array of strings</td>
<td>Semails de quem irá pagar o boleto</td>
</tr>
</tbody></table>

<h2 id="atualização-de-cobrança">Atualização de Cobrança</h2>
<pre class="highlight plaintext"><code>Atualizar Cobrança

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/charges/:charge_id
  PATCH https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X PATCH https://app.cobrato.com/api/v1/charges/:charge_id
    -D '{
          "document_date":"2015-02-02",
          "document_number":"123456789",
          "payer_emails":["myemail@gmail.com"]
        }'

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA DE COBRANÇA INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  {
    "errors":
      {"document_kind":["não está incluído na lista"]}
  }

Exclusão de Cobrança

Exclui determinada cobrança. As mudanças são irreversíveis, e não será mais possível receber o boleto da cobrança excluída!


</code></pre>

<p>Atualiza a cobrança determinada, caso haja sucesso retornará as informações da mesma e será gerado um novo boleto sobrescrevendo o anterior. Se houverem erros eles serão informados no corpo da resposta. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<p>Não é possível atualizar uma cobrança após seu recebimento, para isso é necessário desfazer o recebimento da mesma!</p>

<p>Observação: Os campos &#39;recived&rsquo;, &#39;recived_at&rsquo; e &#39;recived_amount&rsquo;, não são alterados via atualização de cobrança, apenas no recebimento ou desfazendo o recebimento da mesma.</p>

<p>Parâmetros</p>

<table><thead>
<tr>
<th>Campo</th>
<th>Tipo</th>
<th>Comentário</th>
</tr>
</thead><tbody>
<tr>
<td>due_date</td>
<td>date</td>
<td>data de vencimento da cobrança</td>
</tr>
<tr>
<td>document_kind</td>
<td>string</td>
<td>espécie do documento, podendo ser DM (Duplicata Mercantil), DS (Duplicata de Serviço), NP (Nota Promissória) ou DV (Diversos)</td>
</tr>
<tr>
<td>document_date</td>
<td>date</td>
<td>data de emissão do documento</td>
</tr>
<tr>
<td>document_number</td>
<td>string</td>
<td></td>
</tr>
<tr>
<td>our_number</td>
<td>string</td>
<td>requirido caso o &#39;custom_our_number&rsquo; for informado como true</td>
</tr>
<tr>
<td>our_number_digit</td>
<td>integer</td>
<td>digito do verificador do nosso número</td>
</tr>
<tr>
<td>custom_our_number</td>
<td>boolean</td>
<td>Informe &#39;true&rsquo; se desejar utilizar um nosso número personalizado, informe &#39;false&rsquo; se estiver usando nosso número personalizado e deseja alterar para um nosso número atribuído pelo Cobrato</td>
</tr>
<tr>
<td>total_amount</td>
<td>decimal</td>
<td>valor total do boleto</td>
</tr>
<tr>
<td>instructions</td>
<td>string</td>
<td>instruções de pagamento do boleto, por padrão &ldquo;Pago em qualquer agência até data do vencimento.&rdquo;</td>
</tr>
<tr>
<td>demonstrative</td>
<td>string</td>
<td>demonstrativo do Boleto, por padrão, contém a taxa bancária</td>
</tr>
<tr>
<td>payer_emails</td>
<td>array of strings</td>
<td>emails de quem irá pagar o boleto</td>
</tr>
</tbody></table>

<h2 id="exclusão-de-cobrança">Exclusão de Cobrança</h2>
<pre class="highlight plaintext"><code>Excluir Conta de Cobrança

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X DELETE https://app.cobrato.com/api/v1/charges/:charge_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM CONTA DE COBRANÇA INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinada cobrança. As mudanças são irreversíveis, e não será mais possível receber o boleto da cobrança excluída!</p>

          <h1 id="webhooks">Webhooks</h1>

<h2 id="lista-de-todos-os-webhooks">Lista de Todos os Webhooks</h2>
<pre class="highlight plaintext"><code>Listar Webhooks

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/webhooks

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X GET https://app.cobrato.com/api/v1/webhooks

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  {
    "webhooks":
      [
        {
          //informações webhook 1
        },
        {
          //informações webhook 2
        },
        ...
      ]
  }
</code></pre>

<p>Retorna uma lista em JSON contendo todos os webhooks pertencentes a sua Conta de Serviço.</p>

<h2 id="informações-do-webhook">Informações do Webhook</h2>
<pre class="highlight plaintext"><code>Mostra Webhook

DEFINIÇÃO

  GET https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X GET https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE ESTADO DA RESPOSTA

    200 OK

EXEMPLO DE CORPO DA RESPOSTA

  {
    "id": 1,
    "url": "http://www.seusitema.com/cobrato",
    "description": "teste",
    "_links": [
      {"rel":"self","method":"GET","href":"http://localhost:3000/api/v1/webhooks/1"},
      {"rel":"update","method":"PUT","href":"http://localhost:3000/api/v1/webhooks/1"},
      {"rel":"destroy","method":"DELETE","href":"http://localhost:3000/api/v1/webhooks/1"}
    ]
  }

</code></pre>

<p>Retorna as informações detalhadas do webhook em formato JSON.</p>
<pre class="highlight plaintext"><code>Criar Webhook

DEFINIÇÃO

  POST https://app.cobrato.com/api/v1/webhooks

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X POST https://app.cobrato.com/api/v1/webhooks
    -D '{
        "url": "http://www.seusitema.com/cobrato",
        "description": "Webhook teste"
      }'

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    201 Created

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

EXEMPLO DE CORPO DA RESPOSTA COM INSUCESSO

  {
    "errors": {
      "url": [
        "não é válida",
        "não pode ficar em branco",
        "não é válido"
      ]
    }
  }

</code></pre>

<h2 id="criação-de-webhook">Criação de Webhook</h2>

<p>Cria um novo webhook, retornando as informações do mesmo caso haja sucesso. Para realizar o cadastro é necessária que a URL informa aceite as requisições POST e GET, respondendo sempre com HTTP 200. Afim de verificação da URL, o Cobrato fará requisições testes a mesma</p>

<p>Parâmetros</p>

<p>url:  string requirido
URL na qual serão feitas as requisições GET e POST, esperando HTTP 200 como retorno
description:  string
Descrição opcional do Webhook</p>

<h2 id="atualização-de-webhook">Atualização de Webhook</h2>
<pre class="highlight plaintext"><code>Atualizar Webhook

DEFINIÇÃO

  PUT https://app.cobrato.com/api/v1/webhooks/:webhook_id
  PATCH https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X PATCH https://app.cobrato.com/api/v1/webhooks/:webhook_id
    -D '{
        "city": "Farroupilha",
        "state": "RS"
      }'

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    200 OK

EXEMPLO DE ESTADO DA RESPOSTA COM CEDENTE INEXISTENTE

    404 Not Found

EXEMPLO DE ESTADO DA RESPOSTA COM INSUCESSO

    422 Unprocessable Entity

</code></pre>

<p>Atualiza a descrição do webhook. Não é possível alterar a URL de um Webhook. A requisição não diferencia a utilização dos verbos PUT e PATCH.</p>

<p>Parâmetros</p>

<p>description:  string
Descrição opcional do Webhook</p>

<h2 id="exclusão-de-webhook">Exclusão de Webhook</h2>
<pre class="highlight plaintext"><code>Excluir Webhook

DEFINIÇÃO

  DELETE https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE REQUISIÇÃO

  $ curl -i -u $API_TOKEN:X
    -H 'User-Agent: My App 1.0' \
    -H 'Accept: application/json' \
    -H 'Content-type: application/json' \
    -X DELETE https://app.cobrato.com/api/v1/webhooks/:webhook_id

EXEMPLO DE ESTADO DA RESPOSTA COM SUCESSO

    204 No Content

EXEMPLO DE ESTADO DA RESPOSTA COM WEBHOOK INEXISTENTE

    404 Not Found

</code></pre>

<p>Exclui determinado webhook. A exclusão é irreversível.</p>

<h2 id="payloads">Payloads</h2>

<p>Exemplos de requisições enviadas pelo webhook do Cobrato.</p>

<p>As ações notificadas são:</p>

<table><thead>
<tr>
<th>Objeto</th>
<th>Ação</th>
<th>Descrição</th>
</tr>
</thead><tbody>
<tr>
<td>charge</td>
<td>created</td>
<td>quando a cobrança é criada</td>
</tr>
<tr>
<td>charge</td>
<td>received</td>
<td>quando a cobrança é recebida</td>
</tr>
<tr>
<td>charge</td>
<td>undone_receivement</td>
<td>quando a cobrança tem seu recebimento desfeito</td>
</tr>
<tr>
<td>charge</td>
<td>updated</td>
<td>quando a cobrança é atualizada</td>
</tr>
<tr>
<td>charge</td>
<td>destroyed</td>
<td>quando a cobrança é excluída</td>
</tr>
<tr>
<td>charge</td>
<td>received</td>
<td>quando a cobrança é recebida</td>
</tr>
<tr>
<td>charge_account</td>
<td>created</td>
<td>quando a conta de cobrança é criada</td>
</tr>
<tr>
<td>charge_account</td>
<td>updated</td>
<td>quando a conta de cobrança é atualizada</td>
</tr>
<tr>
<td>charge_account</td>
<td>destroyed</td>
<td>quando a conta de cobrança é excluída</td>
</tr>
</tbody></table>

          <h1 id="webhook-cobrança">Webhook - Cobrança</h1>

<h2 id="cobrança-atualizada">Cobrança Atualizada</h2>
<pre class="highlight plaintext"><code>Cobrança Atualizada

EXEMPLO DE PAYLOAD

        {
          "created_at":"2015-05-21T16:13:33Z",
          "action":"updated",
          "object_type":"charge",
          "object_id":12,
          "_links":[{
            "rel":"self",
            "method":"GET",
            "url":"https://app.cobrato.com/api/v1/charges/12"
          }]
        }

</code></pre>

<p>Informações enviadas quando uma Cobrança é atualizada.</p>

<h2 id="cobrança-criada">Cobrança criada</h2>
<pre class="highlight plaintext"><code>Cobrança Criada

EXEMPLO DE PAYLOAD

        {
          "created_at":"2015-05-21T16:13:33Z",
          "action":"created",
          "object_type":"charge",
          "object_id":12,
          "_links":[{
            "rel":"self",
            "method":"GET",
            "url":"https://app.cobrato.com/api/v1/charges/12"
          }]
        }

</code></pre>

<p>Informações enviadas quando uma Cobrança é criada.</p>

<h2 id="cobrança-recebida">Cobrança Recebida</h2>
<pre class="highlight plaintext"><code>Cobrança Recebida

EXEMPLO DE PAYLOAD

        {
          "created_at":"2015-05-21T16:13:33Z",
          "action":"received",
          "object_type":"charge",
          "object_id":12,
          "_links":[{
            "rel":"self",
            "method":"GET",
            "url":"https://app.cobrato.com/api/v1/charges/12"
          }]
        }

</code></pre>

<p>Informações enviadas quando uma Cobrança é recebida.</p>

<h2 id="cobrança-excluida">Cobrança Excluida</h2>
<pre class="highlight plaintext"><code>Cobrança Excluida

EXEMPLO DE PAYLOAD

        {
          "created_at":"2015-05-21T16:13:33Z",
          "action":"destroyed",
          "object_type":"charge",
          "object_id":12,
          "_links":[{
            "rel":"self",
            "method":"GET",
            "url":"https://app.cobrato.com/api/v1/charges/12"
          }]
        }

</code></pre>

<p>Informações enviadas quando uma Cobrança é excluida.</p>

<h2 id="desfazer-recebimento-de-cobrança">Desfazer Recebimento de Cobrança</h2>
<pre class="highlight plaintext"><code>Desfazer Recebimento de Cobrança

EXEMPLO DE PAYLOAD

        {
          "created_at":"2015-05-21T16:13:33Z",
          "action":"undone_receivement",
          "object_type":"charge",
          "object_id":12,
          "_links":[{
            "rel":"self",
            "method":"GET",
            "url":"https://app.cobrato.com/api/v1/charges/12"
          }]
        }

</code></pre>

<p>Informações enviadas quando uma Cobrança tem seu recebimento desfeito.</p>

          <h2 id="cobrança-atualizada">Cobrança Atualizada</h2>
<pre class="highlight plaintext"><code>Cobrança Atualizada

EXEMPLO DE PAYLOAD

        {
          "created_at":"2015-05-21T16:13:33Z",
          "action":"updated",
          "object_type":"charge",
          "object_id":12,
          "_links":[{
            "rel":"self",
            "method":"GET",
            "url":"https://app.cobrato.com/api/v1/charges/12"
          }]
        }

</code></pre>

<p>Informações enviadas quando uma Cobrança é atualizada.</p>

          <h1 id="webhook-conta-cobranca">Webhook Conta Cobranca</h1>

<h2 id="conta-de-cobrança-atualizada">Conta de Cobrança Atualizada</h2>
<pre class="highlight plaintext"><code>Conta de Cobrança Atualizada

EXEMPLO DE PAYLOAD

        {
          "created_at":"2015-05-21T16:13:33Z",
          "action":"updated",
          "object_type":"charge_account",
          "object_id":7,
          "_links":[{
            "rel":"self",
            "method":"GET",
            "url":"https://app.cobrato.com/api/v1/charge_accounts/7"
          }]
        }
</code></pre>

<p>Informações enviadas quando uma Conta de Cobrança é atualizada.</p>

<h2 id="conta-de-cobrança-criada">Conta de Cobrança criada</h2>
<pre class="highlight plaintext"><code>Conta de Cobrança Criada

EXEMPLO DE PAYLOAD

        {
          "created_at":"2015-05-21T16:13:33Z",
          "action":"created",
          "object_type":"charge_account",
          "object_id":7,
          "_links":[{
            "rel":"self",
            "method":"GET",
            "url":"https://app.cobrato.com/api/v1/charges_accounts/7"
          }]
        }

</code></pre>

<p>Informações enviadas quando uma Conta de Cobrança é criada.</p>

<h2 id="conta-de-cobrança-excluida">Conta de Cobrança Excluida</h2>
<pre class="highlight plaintext"><code>Conta de Cobrança Excluida

EXEMPLO DE PAYLOAD

        {
          "created_at":"2015-05-21T16:13:33Z",
          "action":"destroyed",
          "object_type":"charge_account",
          "object_id":7,
          "_links":[{
            "rel":"self",
            "method":"GET",
            "url":"https://app.cobrato.com/api/v1/charge_accounts/7"
          }]
        }

</code></pre>

<p>Informações enviadas quando uma Conta de Cobrança é excluida.</p>

      </div>
      <div class="dark-box">
      </div>
    </div>
  </body>
</html>
