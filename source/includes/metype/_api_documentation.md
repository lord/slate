# API Documentation

## Accounts

### Create an account under an organization

```shell--request
curl -X POST \
  https://www.metype.com/api/v1/organizations/<organization_id>/accounts \
  -H 'Content-Type: application/json' \
  -d '{
	"authentication_token": <authentication_token>,
	"account_name": <account_name>,
	"account_email": <account_email>,
	"website_url": <website_url>
}'
```

```shell--response

{
  "id": 10,
  "config": null,
  "itsman_url": null,
  "name": "foo_1",
  "domains": [
      "http://localhost:3000"
  ],
  "profane_words": [],
  "profanity_configuration": {},
  "comments_limit": 4,
  "logo": null,
  "configurations": [
      {
          "id": 3,
          "name": "enable_image_uploads",
          "display_name": "Images/GIFs in comments"
      }
  ],
  "comment_reaction_sets": [],
  "page_reaction_sets": {
      "id": 10,
      "account_id": 10,
      "reaction_set": [
          {
              "id": 23,
              "account_id": 10,
              "reaction_id": 3,
              "shortcode": ":smiley:",
              "label": "Happy"
          },
          {
              "id": 24,
              "account_id": 10,
              "reaction_id": 4,
              "shortcode": ":cry:",
              "label": "Sad"
          },
          {
              "id": 25,
              "account_id": 10,
              "reaction_id": 5,
              "shortcode": ":sunglasses:",
              "label": "Cool"
          }
      ],
      "created_at": "2018-09-04T06:51:08.812Z",
      "updated_at": "2018-09-04T06:51:08.812Z"
  },
  "total_comments_count": 0,
  "is_paid_account": false
}
```
This endpoint creates an account under an organization


<aside class="notice">
Reach out to metype team to get organization id and authentication token.
</aside>

### HTTP Request

`POST https://www.metype.com/api/v1/organizations/:organization_id/accounts`

### Body Parameters
| Parameter | Required | Description |
|-----------|----------|-------------|
|authentication_token| Yes | Authentication token generated by the metype team to access APIs |
|account_name| Yes | Name of the account |
|account_email| Yes | Email related to the account |
|website_url| Yes | URL of the website where metype will be used |

### Response codes
| Response code | Description |
|---------------|-------------|
|201|Account is created|
|400|When required paramaters are not sent with API|
|401|When you pass wrong organization credentials i.e., organization_id or authentication_token|
|404|When organization_id is not passed or invalid organization_id is not passed|
|422|When an invalid website_url is sent as a parameter|

## Users

### Create a user under an organization

```shell--request
curl -X POST \
  https://www.metype.com/api/v1/organizations/<organization_id>/users \
  -d '{
	"authentication_token" : <authentication_toke>,
	"user":{
		"name":<name>,
		"email":<email>
	}
}'
```

```shell--response
{
    "id": 11,
    "name": "name",
    "avatar": null,
    "guest": false,
    "bio": "",
    "slug": "name-3",
    "accounts": []
}
```

This endpoint creates a user under an organization
<aside class="notice">
Reach out to metype team to get organization id and authentication token.
</aside>

### HTTP Request

`POST https://www.metype.com/api/v1/organizations/:organization_id/users`

### Body Parameters
| Parameter | Required | Description |
|-----------|----------|-------------|
|authentication_token| Yes | Authentication token generated by the metype team to access APIs |
|name| Yes | Name of the user |
|email| Yes | Email of the user |

### Response codes
| Response code | Description |
|---------------|-------------|
|201|User is created|
|400|When required paramaters are not sent with API|
|401|When you pass wrong organization credentials i.e., organization_id or authentication_token|
|404|When organization_id is not passed or invalid path|
|422|When user paramater or name is empty|

## Comments Creation

### Create a comment under an organization using account and user

```shell--request
curl -X POST \
  https://www.metype.com/api/v1/organizations/<organization_id>/accounts/<account_id>/comments \
  -H 'Content-Type: application/json' \
  -d '{
	"authentication_token" : <authentication_toke>,
	"page_id": <page_id>,
  "comment": {
    "comment": "text"
  },
    "user_id": <user_id>
  }'
```

```shell--response
{
    "comment": {
        "id": 207,
        "comment_realm_id": 3,
        "page_id": 2,
        "body": {
            "comment": "text"
        },
        "created_at": "2018-09-06T12:24:07.005Z",
        "parent_comment_id": null,
        "author_id": 19,
        "hidden_by_id": null,
        "hidden_at": null,
        "deleted_by_id": null,
        "deleted_at": null,
        "reactions": {},
        "edited_at": null,
        "is_spam": false,
        "is_published": true,
        "page_url": "https://foobar.com/stairway-way-to-heaven",
        "hero_image_url": null,
        "headline": null,
        "hidden": false,
        "deleted": false,
        "realm_comment_count": 1,
        "author": {
            "id": 19,
            "name": "name",
            "avatar": null,
            "guest": false,
            "bio": "",
            "slug": "name-4"
        }
    }
}
```

This endpoint creates a comment under an organization and account
<aside class="notice">
Reach out to metype team to get organization id and authentication token.
</aside>

### HTTP Request

`POST https://www.metype.com/api/v1/organizations/:organization_id/accounts/:account_id/comments`

### Body Parameters
| Parameter | Required | Description |Type|
|-----------|----------|-------------|----|
|authentication_token| Yes | Authentication token generated by the metype team to access APIs |
|page_id| Yes | Url of page which owns the comment |Base64 encoded|
|comment| Yes | JSON structure to store comment |
|user_id|| Yes | The author id of the comment |
|parent_comment_id| No | If the comment is reply. Give parent comment id. |

### Response codes
| Response code | Description |
|---------------|-------------|
|201|Comment is created.|
|400|When required paramaters are not sent with API or invalid parameters are sent with API.|
|401|When you pass wrong organization credentials i.e., organization_id or authentication_token|
|404|When organization_id or account_id is not passed or invalid path.|
|422|When invalid page_id or user_id or parent_comment_id is passed.|
